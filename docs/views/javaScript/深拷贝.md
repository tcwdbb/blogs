---
title: 深拷贝
categories:
- JavaScript
tags:
- 手写
- 工具函数
---
- 1首先使用hasOwnProperty判断是否是自身的属性
- 2判断是否是一个对象，并且不为空，如果是对象则进行递归，否则将值保存到新对象中
- 3如果是对象，利用Object.prototype.toString.call()进行深检测判断对象是Array还是Obejct，赋值为空对象或数组，进行递归拷贝下一层
``` js
//深拷贝
export function deepClone(origin, target) {
	var target = target || {},
		toStr = Object.prototype.toString, //
		arrType = '[object Array]'; //缓存一个数组类型，用作判断类型
	for (var key in origin) {
		if (origin.hasOwnProperty(key)) { //去除自定义原型里面的属性		//null -> object	
			if (typeof(origin[key]) === 'object' && origin[key] !== null) { //判断属性类型是否为引用类型
				toStr.call(origin[key]) === arrType ? target[key] = [] :
					target[key] = {};
				deepClone(origin[key], target[key]); //递归 拷贝下一层
			} else {
				target[key] = origin[key]; //将原始值拷贝到新对象
			}
		}
	}
	return target;
}
```

JSON的stringify() 和 parse() 两个方法也能做深拷贝

Object.assign(); 第一个参数为新对象，后面可以跟对歌源对象，将源对象合并到新对象中，是浅拷贝